DROP TABLE IF EXISTS tests;

CREATE TABLE tests (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    testname TEXT NOT NULL,
    nodepath TEXT NOT NULL,
    circompath TEXT NOT NULL,
    rustpath TEXT NOT NULL
);

DROP TABLE IF EXISTS test_data;

CREATE TABLE test_data (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    test_id INTEGER NOT NULL,
    field1_data TEXT NOT NULL,
    field2_data TEXT NOT NULL,
    expected_output TEXT
);

DROP TABLE IF EXISTS test_runs;

CREATE TABLE test_runs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    test_id INTEGER NOT NULL,
    rundescription TEXT
);

DROP TABLE IF EXISTS test_outcomes;

CREATE TABLE test_outcomes (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    run_id INTEGER NOT NULL,
    circomoutput TEXT NOT NULL,
    circommatch INTEGER NOT NULL,
    rustoutput TEXT NOT NULL,
    rustmatch INTEGER NOT NULL,
    wereEqual INTEGER NOT NULL
);

DROP TABLE IF EXISTS is_init;

CREATE TABLE is_init (
    isinited INTEGER
);

INSERT INTO is_init (isinited) VALUES (1);
INSERT INTO tests (testname,nodepath,circompath,rustpath) VALUES ('Poseidon','nodepath','circompath','rustpath');
INSERT INTO test_data (test_id,field1_data,field2_data,expected_output) VALUES (1,'115792089237316195423570985008687907853269984665640564039457584007908834671663','115792089237316195423570985008687907853269984665640564039457584007908834671662','46702443887670435486723478191273607819169644657419964658749776213559127696053');
